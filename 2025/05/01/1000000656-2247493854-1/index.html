<!DOCTYPE HTML>
<html lang="zh-CN">


<head>
    <meta charset="utf-8">
    <meta name="keywords" content="关于生产级RAG系统构建的一些经验总结, ZejunCao&#39;Blogs">
    <meta name="description" content="关于生产级RAG系统构建的一些经验总结

仅用于站内搜索，没有排版格式，具体信息请跳转上方微信公众号内链接

本文将探讨如何使用最新技术构建生产级检索增强生成(RAG)系统，包括健壮的架构、向量数据库(Faiss、Pinecone、Weav">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="renderer" content="webkit|ie-stand|ie-comp">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="referrer" content="no-referrer-when-downgrade">
    <!-- Global site tag (gtag.js) - Google Analytics -->


    <title>关于生产级RAG系统构建的一些经验总结 | ZejunCao&#39;Blogs</title>
    <link rel="icon" type="image/png" href="/favicon.png">
    


    <!-- bg-cover style     -->



<link rel="stylesheet" type="text/css" href="/libs/awesome/css/all.min.css">
<link rel="stylesheet" type="text/css" href="/libs/materialize/materialize.min.css">
<link rel="stylesheet" type="text/css" href="/libs/aos/aos.css">
<link rel="stylesheet" type="text/css" href="/libs/animate/animate.min.css">
<link rel="stylesheet" type="text/css" href="/libs/lightGallery/css/lightgallery.min.css">
<link rel="stylesheet" type="text/css" href="/css/matery.css">
<link rel="stylesheet" type="text/css" href="/css/my.css">
<link rel="stylesheet" type="text/css" href="/css/dark.css" media="none" onload="if(media!='all')media='all'">




    <link rel="stylesheet" href="/libs/tocbot/tocbot.css">
    <link rel="stylesheet" href="/css/post.css">




    
        <link rel="stylesheet" type="text/css" href="/css/reward.css">
    



    <script src="/libs/jquery/jquery-3.6.0.min.js"></script>

<meta name="generator" content="Hexo 7.3.0"></head>


<body>
    <header class="navbar-fixed">
    <nav id="headNav" class="bg-color nav-transparent">
        <div id="navContainer" class="nav-wrapper container">
            <div class="brand-logo">
                <a href="/" class="waves-effect waves-light">
                    
                    <img src="/medias/logo.png" class="logo-img" alt="LOGO">
                    
                    <span class="logo-span">ZejunCao&#39;Blogs</span>
                </a>
            </div>
            

<a href="#" data-target="mobile-nav" class="sidenav-trigger button-collapse"><i class="fas fa-bars"></i></a>
<ul class="right nav-menu">
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/" class="waves-effect waves-light">
      
      <i class="fas fa-home" style="zoom: 0.6;"></i>
      
      <span>首页</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/tags" class="waves-effect waves-light">
      
      <i class="fas fa-tags" style="zoom: 0.6;"></i>
      
      <span>标签</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/categories" class="waves-effect waves-light">
      
      <i class="fas fa-bookmark" style="zoom: 0.6;"></i>
      
      <span>分类</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/archives" class="waves-effect waves-light">
      
      <i class="fas fa-archive" style="zoom: 0.6;"></i>
      
      <span>归档</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/about" class="waves-effect waves-light">
      
      <i class="fas fa-user-circle" style="zoom: 0.6;"></i>
      
      <span>关于</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/contact" class="waves-effect waves-light">
      
      <i class="fas fa-comments" style="zoom: 0.6;"></i>
      
      <span>留言板</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/friends" class="waves-effect waves-light">
      
      <i class="fas fa-address-book" style="zoom: 0.6;"></i>
      
      <span>友情链接</span>
    </a>
    
  </li>
  
  <li>
    <a href="#searchModal" class="modal-trigger waves-effect waves-light">
      <i id="searchIcon" class="fas fa-search" title="搜索" style="zoom: 0.85;"></i>
    </a>
  </li>
  <li>
    <a href="javascript:;" class="waves-effect waves-light" onclick="switchNightMode()" title="深色/浅色模式" >
      <i id="sum-moon-icon" class="fas fa-sun" style="zoom: 0.85;"></i>
    </a>
  </li>
</ul>


<div id="mobile-nav" class="side-nav sidenav">

    <div class="mobile-head bg-color">
        
        <img src="/medias/logo.png" class="logo-img circle responsive-img">
        
        <div class="logo-name">ZejunCao&#39;Blogs</div>
        <div class="logo-desc">
            
            Never really desperate, only the lost of the soul.
            
        </div>
    </div>

    <ul class="menu-list mobile-menu-list">
        
        <li class="m-nav-item">
	  
		<a href="/" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-home"></i>
			
			首页
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/tags" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-tags"></i>
			
			标签
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/categories" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-bookmark"></i>
			
			分类
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/archives" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-archive"></i>
			
			归档
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/about" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-user-circle"></i>
			
			关于
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/contact" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-comments"></i>
			
			留言板
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/friends" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-address-book"></i>
			
			友情链接
		</a>
          
        </li>
        
        
        <li><div class="divider"></div></li>
        <li>
            <a href="https://github.com/blinkfox/hexo-theme-matery" class="waves-effect waves-light" target="_blank">
                <i class="fab fa-github-square fa-fw"></i>Fork Me
            </a>
        </li>
        
    </ul>
</div>


        </div>

        
            <style>
    .nav-transparent .github-corner {
        display: none !important;
    }

    .github-corner {
        position: absolute;
        z-index: 10;
        top: 0;
        right: 0;
        border: 0;
        transform: scale(1.1);
    }

    .github-corner svg {
        color: #0f9d58;
        fill: #fff;
        height: 64px;
        width: 64px;
    }

    .github-corner:hover .octo-arm {
        animation: a 0.56s ease-in-out;
    }

    .github-corner .octo-arm {
        animation: none;
    }

    @keyframes a {
        0%,
        to {
            transform: rotate(0);
        }
        20%,
        60% {
            transform: rotate(-25deg);
        }
        40%,
        80% {
            transform: rotate(10deg);
        }
    }
</style>

<a href="https://github.com/blinkfox/hexo-theme-matery" class="github-corner tooltipped hide-on-med-and-down" target="_blank"
   data-tooltip="Fork Me" data-position="left" data-delay="50">
    <svg viewBox="0 0 250 250" aria-hidden="true">
        <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
        <path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2"
              fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path>
        <path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z"
              fill="currentColor" class="octo-body"></path>
    </svg>
</a>
        
    </nav>

</header>

    



<div class="bg-cover pd-header post-cover" style="background-image: url('/medias/frontcover/1000000656_2247493854_1.jpg')">
    <div class="container" style="right: 0px;left: 0px;">
        <div class="row">
            <div class="col s12 m12 l12">
                <div class="brand">
                    <h1 class="description center-align post-title">关于生产级RAG系统构建的一些经验总结</h1>
                </div>
            </div>
        </div>
    </div>
</div>




<main class="post-container content">

    
    <div class="row">
    <div id="main-content" class="col s12 m12 l9">
        <!-- 文章内容详情 -->
<div id="artDetail">
    <div class="card">
        <div class="card-content article-info">
            <div class="row tag-cate">
                <div class="col s7">
                    
                    <div class="article-tag">
                        
                            <a href="/tags/ChallengeHub/">
                                <span class="chip bg-color">ChallengeHub</span>
                            </a>
                        
                    </div>
                    
                </div>
                <div class="col s5 right-align">
                    
                </div>
            </div>

            <div class="post-info">
                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-minus fa-fw"></i>发布日期:&nbsp;&nbsp;
                    2025-05-01
                </div>
                

                

                

                

                
            </div>
        </div>
        <hr class="clearfix">

        

        

        <div class="card-content article-card-content">
            <div id="articleContent">
                <p><a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/_fPjCzzahEFCOy2lLX9VYA">关于生产级RAG系统构建的一些经验总结</a></p>
<blockquote>
<p>仅用于站内搜索，没有排版格式，具体信息请跳转上方微信公众号内链接</p>
</blockquote>
<p>本文将探讨如何使用最新技术构建生产级检索增强生成(RAG)系统，包括健壮的架构、向量数据库(Faiss、Pinecone、Weaviate)、框架(LangChain、LlamaIndex)、混合搜索、重排序器、流式数据接入、评估策略以及实际部署技巧。<br>大型语言模型功能强大，但常常会产生幻觉——由于缺乏最新或事实性数据，它们可能会生成不正确的信息。<br>检索增强生成(RAG)通过为语言模型配备检索机制来解决这一问题：模型可以从外部知识源获取相关文档，并利用它们作为回答的依据。这种方法结合了两个世界的优点——搜索系统或数据库的知识，以及生成模型的流畅性。精心设计的RAG系统能够提供准确、上下文感知的回答，即使是关于语言模型训练数据中没有的小众或最新信息。<br>它已成为企业聊天机器人（回答公司文档问题）、带自然语言回答的搜索引擎（如必应聊天）以及任何需要事实准确性的领域的首选架构。<br>简单来说，RAG的工作方式如下：当问题进入系统时，首先对文档索引或向量数据库执行搜索（使用问题或其处理形式）以检索相关段落。然后将这些最相关的文档与用户问题一起作为上下文输入到语言模型的提示中。语言模型生成一个引用或整合了检索信息的答案。结果是一个基于真实数据的答案，大大减少了幻觉并提高了正确性。这种架构在2020年左右开始流行，并在2024年发展成为成熟的生产系统。<br>下面将探讨如何使用最新工具和方法构建生产就绪的RAG流水线。<br>总的来说，RAG系统有几个关键组件：<br>文档存储&#x2F;索引：知识库文档，可以是向量数据库（用于语义搜索）或传统搜索索引（用于关键词搜索），或两者结合。流行的选择包括Faiss（开源向量相似度搜索库）、托管向量数据库服务如Pinecone或Weaviate，甚至是具有密集向量功能的Elasticsearch&#x2F;OpenSearch。<br>检索器：给定查询，从存储中检索前k个相关文档的逻辑。这通常涉及将查询嵌入为向量并找到最近邻（语义相似性）。它还可能使用关键词或元数据过滤。<br>语言模型提示模块：获取检索到的文档并为语言模型构建提示或上下文。通常，它可能会格式化提示，如：”以下是一些相关段落：\n[文档1]\n[文档2]\n问题：[用户问题]\n回答：”。这个提示的设计（文档如何插入，任何分隔符或指令）可能会影响性能。<br>生成（语言模型）：大型语言模型（如GPT-3、Llama2等）基于问题和检索上下文生成答案。<br>后处理：（可选）步骤如引用来源（识别哪个检索文档支持答案的各个部分）、过滤低置信度答案（例如，如果模型没有找到足够信息，它可能会响应一个回退答案），或格式化答案。<br>在生产部署中，这些组件通常被解耦为微服务。例如，向量数据库服务（如单独运行的Pinecone、Milvus、Weaviate等）处理存储和相似性搜索；检索器服务（可能只是调用数据库或WebSearch）处理查询逻辑；语言模型推理服务（可能使用API或本地模型服务器）处理生成。<br>典型的请求流程是：用户查询→[检索器]→前3个文档→[语言模型]→最终答案。<br>这可能会通过中间步骤进行扩展：例如，一些RAG系统使用语言模型生成更好的搜索查询（查询重构）或进行多跳检索（先找到相关部分，然后使用它找到更详细的信息）。此架构是模块化的，可以根据需要进行扩展。<br>从头开始构建RAG系统很复杂，但好消息是有一个工具生态系统可以帮助：<br>这些是专门用于存储嵌入向量并支持快速相似性搜索的数据库：<br>Faiss是一个库（C++带Python绑定），可以在内存中处理数百万个向量，并提供各种索引策略（flat、IVF、HNSW）用于高效的近似最近邻搜索。<br>Pinecone和Weaviate是云原生向量数据库服务，处理扩展、持久性和过滤。它们允许不仅存储嵌入向量，还存储元数据（如文档ID、标签），并执行混合查询（结合向量相似性和元数据过滤）。<br>Chroma（开源）和Milvus是2024年其他流行的向量存储。这些允许自托管持久向量数据库。<br>对于小规模或简单部署，即使是内存中的Faiss索引或SQLite全文搜索也足够——但生产系统通常需要专用服务的健壮性。<br>开发者使用如LangChain和LlamaIndex（前身为GPTIndex）等框架，而不是手动编写所有检索和提示逻辑：<br>LangChain提供涉及语言模型的行动链抽象，例如一个RetrievalQA链，它接收问题，使用检索器获取文档，然后用这些文档调用语言模型。它支持与许多向量数据库和语言模型API的集成，所以只需几行代码，就可以配置一个使用Pinecone进行检索和GPT-4进行生成的LangChainQAChain。<br>LlamaIndex也专注于索引方面。它帮助构建数据索引（具有各种结构，如列表索引、树索引用于分层检索等），并提供简单的查询接口。例如，可以构建文档的向量索引，然后执行index.query(“我的问题”)，它将处理查询嵌入、检索最佳节点，并为语言模型组装上下文。<br>这些框架还提供上下文分割工具——它们可以将文档分成适合语言模型上下文窗口的大小。它们通常使用智能分块逻辑来保持段落语义连贯（例如，按段落或部分分块），甚至可以按标题或元数据存储文本分割，以便提供给语言模型的上下文是有意义的。<br>一些搜索引擎结合了密集和稀疏搜索：<br>例如，Azure认知搜索和ElasticSearch可以混合使用关键词BM25搜索和向量搜索，这可以改善某些查询的结果，特别是那些具有特定关键词（如错误代码或专有名词）的查询，纯语义搜索可能会遗漏这些。<br>LlamaIndex等工具允许插入混合检索器（一步使用关键词搜索，另一步使用向量搜索，并合并结果）。<br>检索步骤通常会获取10-20个候选段落：<br>使用重排序模型（通常是较小的基于BERT的交叉编码器，它接收查询和每个候选段落并评分相关性）可以大大提高精度。<br>重排序器重新阅读每个候选段落并考虑完整的查询上下文，给出相关性分数，允许系统选择最佳的3个提供给语言模型。<br>这种两阶段先检索后重排序的方法，类似于网络搜索引擎，越来越多地用于RAG以提高答案质量。<br>例如，可以使用SentenceTransformers的交叉编码器模型（如cross-encoder&#x2F;ms-marco-MiniLM-L-6-v2）对向量搜索的初始结果进行重排序。<br>在实践中，可能会将这些结合起来：使用LangChain定义一个检索链，首先进行混合搜索（例如，使用Weaviate的混合查询，同时使用向量相似度和关键词匹配），然后通过交叉编码器重排序结果，然后将顶部段落格式化为GPT-3.5或Llama-2等语言模型的提示，最后使用语言模型的答案。向量数据库执行繁重工作（向量数学等）；LangChain只是协调各部分。这种模块化方法意味着可以交换组件（例如，使用不同的语言模型或切换到更高效的向量索引），而无需重写整个管道。<br>检索上下文的质量对RAG成功至关重要。以下是截至2025年出现的一些最佳实践和高级技术：<br>不要只是将文档分成随机的512个标记块。保留章节和标题：<br>例如，如果有一个标题为”安装步骤”的文档，在该部分的每个块中包含该标题文本作为”标题”。<br>通过添加上下文标题，检索器的嵌入向量能更好地编码该块的上下文（”安装步骤：…内容…”），从而带来更准确的匹配。<br>保持块适中大小（可能200-300字），以确保每个块覆盖特定主题。太小会失去上下文，太大会使嵌入向量稀释相关信息。<br>许多团队找到了一个最佳点，并经常允许块之间有一些重叠，以确保边界处的重要信息不会被遗漏。<br>仅依靠向量相似性有时会在精确关键词匹配上失败：<br>例如，询问”错误0x803d”或特定名称的查询，在嵌入空间中可能与包含它的文档不相似。<br>健壮的RAG系统通常结合BM25关键词搜索和向量搜索。这可以通过并行运行两个搜索来完成：一个使用传统搜索（如ElasticSearch），一个使用嵌入，然后合并结果（确保没有重复并从两者中取最佳）。<br>一些向量数据库（如Weaviate、Milvus）和搜索服务直接支持混合查询，可以权衡语义和词法分数。<br>结果是更高的召回率——捕获一种方法或另一种方法可能遗漏的情况。<br>许多生产系统默认使用混合搜索以增加安全性，特别是在客户支持领域，准确的术语或错误代码很重要。<br>输入数据库的检索查询不必与用户的问题完全相同。有时查询扩展或分解会有所帮助：<br>例如，Perplexity.ai引入了查询分解：如果检测到复杂查询，将其分解为子查询，为每个子查询检索，然后组合。<br>示例：问题”2023年能源危机的原因和影响是什么？”可以分为”2023年能源危机的原因”和”2023年能源危机的影响”，为两个方面检索文档，并将两组结果输入到答案中。<br>另一个技巧是伪相关反馈：使用初始检索结果用重要术语扩展查询（或使用语言模型以更明确的方式重新表述查询）。<br>这些可以产生更相关的文档，但会增加复杂性和成本。<br>确保向量索引以正确的速度与准确性权衡构建：<br>例如，HNSW索引可以在给定延迟下调整召回率。<br>尽可能使用缓存——如果经常问同样的问题，缓存检索文档甚至最终答案（如果数据更新，则适当失效）。<br>如果需要吞吐量，也可以考虑批处理检索请求（如果使用API，将多个用户查询分组到数据库）。<br>这些优化使实时使用的延迟保持较低。<br>如果检索到的文档太大，无法放入语言模型上下文窗口（可能是4k到16k标记）：<br>可能需要修剪或总结它们。一种常见方法是先检索，然后运行较小的语言模型或启发式算法，将每个检索到的文档总结为一段话，然后将这些摘要输入最终的语言模型。<br>这有时被称为上下文压缩或自适应上下文。LlamaIndex等工具可以自动执行第二阶段，使用语言模型在最终答案之前将初始检索集压缩成更短的形式。<br>仅在绝对需要时使用此方法，因为任何摘要都是额外的生成步骤，可能会引入自己的错误。<br>随着2025年16k+标记模型的出现，如果适合，许多RAG系统尝试只提供原始文本，因为这保留了最大的细节。<br>构建生产RAG系统最困难的部分之一是评估。传统的准确性指标并不直接适用，因为输出是自由形式的文本，可能引用源材料。然而，健壮的评估至关重要：正如一位RAG专家指出，许多团队”在这方面失败”，因为他们没有严格的评估，然后他们的系统在生产中出乎意料地失败。<br>关键评估策略包括：<br>如果可能，为领域组装问答对数据集（带有真实答案）：<br>对于每个问题，测试RAG系统的答案——使用与参考答案的ROUGE或F1等指标。<br>这在开放域问答研究中很常见（例如，NaturalQuestions数据集）。<br>然而，在许多情况下，用户可能提出的所有问题并没有现成的真实答案。<br>由于RAG应该基于检索文本的答案：<br>可以评估答案与源的一致性。RAGAS库（检索增强生成评估套件）已发布，提供了答案-上下文相关性和幻觉检测等指标。<br>它可以检查答案是否包含在提供的文档中找不到的陈述，标记潜在的幻觉。<br>RAGAS或类似开源工具检查：模型是否真正使用了检索文本？它是否与源冲突？<br>这些工具给出数字分数，但通常仍需人工验证。<br>在早期阶段，团队成员可能会简单地提出一堆问题并判断答案是否”看起来正确”：<br>这种临时测试是一个不错的开始，但要进入生产阶段，需要将其正式化。<br>这可能意味着聘请领域专家或众包工作者根据正确性、完整性、连贯性、引用源等标准评估答案。<br>通常，即使在部署后，系统中的随机问答样本也会定期由人类审查，以捕捉性能下降或新的失败模式。<br>根据用例，可能会跟踪不同的指标：<br>例如，对于支持聊天机器人，可能会测量偏转率（机器人无需人工代理解决问题的频率）。<br>对于内部知识助手，可能会测量用户反馈或用户是否跟随提供的链接。<br>关键是将系统性能与用户满意度相关的可衡量指标联系起来。<br>重要的是，不能优化没有测量的东西。RAG系统有许多可调节的旋钮（嵌入模型选择、块大小、文档数量、提示格式等）。全面的评估套件允许对这些组件进行A&#x2F;B测试。例如，可能会实验：添加重排序器是否如预期提高了答案精度？将检索段落数量从3增加到5是否真的会产生更好的答案，还是只会使语言模型混淆？只有通过适当的评估才能系统地迭代。许多团队扩展开源框架或构建内部仪表板。一些团队采用两层评估：每次构建的自动检查（以捕捉明显的退步）和定期更深入的人工评估。<br>成功的RAG部署大量投资于评估——涵盖查询理解、源引用、响应完整性和幻觉率。他们通常需要开发特定领域的测试集，因为通用基准没有捕捉到他们用户的需求。例如，法律文档助手可能会创建一套法律问答，并确保系统为每个答案引用法律中的正确条款，专门评估这一点。<br>2024年的一个前沿发展是流式RAG——使RAG系统能够实时处理持续更新的数据流。在经典RAG中，索引定期更新（可能每天一次或在新文档摄入时）。但如果信息每分钟都在变化（想想股票价格、实时体育评论、突发新闻）呢？流式RAG扩展了架构以支持连续摄入和检索。<br>在流式RAG管道中，可能有类似：文档（或数据库更新）的Kafka流不断输入到向量数据库索引中。系统执行增量索引——当新文本到达时，它立即被嵌入并索引到向量存储中（过时时可能也被移除）。检索器设计为始终查询索引的最新状态。这涉及为快速写入和读取设计向量数据库。现代向量数据库如Weaviate和Pinecone已经改进了他们的更新性能，以处理高QPS的插入，使这成为可能。<br>此外，语言模型推理可能需要意识到时间。流式RAG可以在提示中纳入时间意识（例如，添加一个语句如”当前日期时间：2025-05-0110:00EST”，让模型知道优先考虑最新信息）。此外，如果数据在生成过程中快速变化，可以采用自适应生成等策略——对于长时间运行的输出，可能在生成中间检查是否有新信息（虽然在实践中，生成通常非常快，除非是非常慢的过程，否则这通常不是必要的）。<br>流式RAG的参考架构可能包括：<br>使用Kafka或Kinesis等消息队列摄入变更（新文档、更新）。<br>消费者获取每个新项目并更新向量索引（例如，Pinecone更新或支持添加的本地Faiss索引）。<br>检索器组件监控这些变化或简单地查询实时索引，以便始终获得最新结果。<br>可能有机制使旧数据过期或存档，如果只有最近数据相关（以便索引不会无限增长陈旧信息）。<br>管道的其余部分保持相似（语言模型使用检索到的文档）。<br>一个真实世界的场景：回答有关股市事件的财务助手。使用流式RAG，一旦关于公司X的新闻文章发布并进入新闻源，它就会被索引。如果用户几秒钟后问”今天公司X的股票怎么样？”，检索器会找到该新鲜新闻文章，语言模型可以将其整合，说”公司X的股票今天上涨5%，此前报告本早上创纪录的收益”——静态语言模型不会知道的事情。这使语言模型应用更接近实时商业智能。<br>当然，使其生产就绪意味着谨慎处理吞吐量和一致性。如果摄入量非常高，可能需要扩展索引工作者并分区向量索引。此外，考虑增量重排序或窗口搜索：对于流，有时更关心最近N小时的数据——可以为效率和相关性限制搜索到最近项目。<br>设计架构和选择工具后，部署RAG系统有一些实际考虑：<br>生产RAG管道引入额外步骤（检索等），因此保持低延迟很重要：<br>可能时使用异步调用——例如，如果进行多个检索或模型调用，可以并行从向量数据库和语言模型获取。<br>如果支持，还可以启用语言模型的流式标记输出（以便用户可以在生成答案时开始看到，改善感知延迟）。<br>一些语言模型API和服务器允许标记流式传输，这对长答案的用户体验非常好。<br>如果检索器未扩展，可能成为瓶颈；确保向量数据库的大小能够处理查询负载：<br>多层缓存可以帮助——缓存频繁查询的嵌入，缓存流行问题的检索结果，甚至缓存非常重复的查询的最终答案（仔细验证数据未更改）。<br>负载均衡应考虑语言模型和数据库组件。<br>在生产中，不仅要监控典型的基础设施指标（延迟、错误率），还要监控RAG特定的指标：<br>例如，跟踪答案的平均标记数、没有源的答案比例（如果应该有源，这可能表示检索失败&#x2F;幻觉），或者触发回退”我不知道”响应的频率。<br>如果自己托管用于查询编码的嵌入模型，监控其延迟也很重要。<br>如果知识库包含敏感数据，在检索中实现访问控制：<br>常见的模式是用权限标签标记嵌入，并在查询时按用户权限过滤。<br>例如，向量数据库如Pinecone或Weaviate可以存储元数据（如文档所有者或分类级别），可以在查询中添加元数据过滤器（例如，如果财务用户在提问，只检索document_department&#x3D;’finance’的文档）。<br>语言模型本身应该被指示不要透露检索上下文之外的信息，理想情况下，如果没有找到相关公共信息，应该说它无法回答（而不是猜测）。<br>系统上线后，收集用户反馈：<br>如果用户可以评价答案，或者可以观察他们的后续行为（比如他们是否总是重新表述问题，可能系统最初失败），反馈这些。<br>可能会根据这些反馈定期重新训练或微调嵌入模型或调整提示。<br>RAG系统通常有许多”旋钮”可以调整，所以将其视为一个持续过程。<br>许多公司已经部署了RAG：<br>OpenAI自己的插件系统（ChatGPT搜索网络或数据库）实际上是RAG的底层实现。<br>微软的必应聊天使用网络搜索（必应索引）获取相关网页，然后必应聊天阅读以形成答案，引用来源。<br>在企业方面，Docker和Reddit等公司已经建立了使用RAG处理文档和论坛数据的支持机器人。<br>这些部署表明，通过正确的数据策划和系统设计组合，RAG可以大大增强语言模型在实际任务中的用处。<br>为了具体说明RAG的应用，我们以使用LlamaIndex和向量数据库部署文档问答助手为例：<br>将所有文档页面按章节进行分块（每个分块保留章节标题）<br>使用LlamaIndex创建向量索引（可基于Faiss或Pinecone实现）<br>通过OpenAI的text-embedding-ada-002或类似模型为每个分块生成嵌入向量<br>存储元数据（源页面URL、章节标题）<br>查询进入时，使用相同的嵌入模型处理问题，并从Pinecone获取相似度最高的5个分块<br>同时在标题的倒排索引上进行关键词搜索，找出潜在的精确匹配（作为备选）<br>将问题与每个检索到的分块连接起来，输入小型BERT重排模型评分<br>按相关性排序并选取前3个结果<br>我们为GPT-4（或开源LLM如Llama2-Chat70B）构建如下提示：<br>这个提示明确告诉模型使用文档摘录并避免胡编乱造信息。<br>LLM会生成类似这样的回答：”要在Ubuntu上安装该工具，首先更新apt，然后运行sudoapt-getinstalltoolname。（来自安装指南）”。由于我们的提示指示，它会包含参考文档，并且不会引入摘录中不存在的信息。如果不知道答案，会直接表明”抱歉，我没有这方面的信息”。<br>检查答案中是否有虚构信息的迹象（可能要求必须引用至少一个源文档标题）<br>确认无误后，将答案返回给用户<br>记录问题、检索文档和答案以便分析<br>这段伪代码概述了文档检索和提示使用的流程。实际应用中，你会使用LangChain或LlamaIndex方法而非手动编写，但这展示了数据流。注意我们指示模型使用提供的摘录。通过提示设计和选择遵循指令的LLM，确保模型不偏离主题对RAG至关重要。<br>生产级RAG系统将信息检索的稳健性与LLM的生成能力相结合。通过遵循最佳实践—精选高质量数据源、保持索引更新、优化提示以获得有根据的答案、严格评估性能—团队可以构建可靠且可扩展的RAG系统。最新进展如流式更新和更好的混合搜索确保RAG不断发展，能够处理更大、更动态的知识库。<br>到2025年，我们看到RAG技术将应用于从客户支持机器人到医疗助手（结合严格的隐私控制）等各种场景。它是知识感知型AI的基础架构。通过掌握RAG设计并了解新工具动态，开发人员可以大大拓展LLM应用的能力—提供纯LLM无法实现的真实、最新且上下文相关的响应。<br>参考内容：https :&#x2F;&#x2F;<a target="_blank" rel="noopener" href="http://www.kapa.ai/blog/rag-best-practices">www.kapa.ai/blog/rag-best-practices</a></p>

                
            </div>
            <hr/>

            

    <div class="reprint" id="reprint-statement">
        
            <div class="reprint__author">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-user">
                        文章作者:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="/about" rel="external nofollow noreferrer">ZejunCao</a>
                </span>
            </div>
            <div class="reprint__type">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-link">
                        文章链接:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="https://zejuncao.github.io/2025/05/01/1000000656-2247493854-1/">https://zejuncao.github.io/2025/05/01/1000000656-2247493854-1/</a>
                </span>
            </div>
            <div class="reprint__notice">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-copyright">
                        版权声明:
                    </i>
                </span>
                <span class="reprint-info">
                    本博客所有文章除特別声明外，均采用
                    <a href="https://creativecommons.org/licenses/by/4.0/deed.zh" rel="external nofollow noreferrer" target="_blank">CC BY 4.0</a>
                    许可协议。转载请注明来源
                    <a href="/about" target="_blank">ZejunCao</a>
                    !
                </span>
            </div>
        
    </div>

    <script async defer>
      document.addEventListener("copy", function (e) {
        let toastHTML = '<span>复制成功，请遵循本文的转载规则</span><button class="btn-flat toast-action" onclick="navToReprintStatement()" style="font-size: smaller">查看</a>';
        M.toast({html: toastHTML})
      });

      function navToReprintStatement() {
        $("html, body").animate({scrollTop: $("#reprint-statement").offset().top - 80}, 800);
      }
    </script>



            <div class="tag_share" style="display: block;">
                <div class="post-meta__tag-list" style="display: inline-block;">
                    
                        <div class="article-tag">
                            
                                <a href="/tags/ChallengeHub/">
                                    <span class="chip bg-color">ChallengeHub</span>
                                </a>
                            
                        </div>
                    
                </div>
                <div class="post_share" style="zoom: 80%; width: fit-content; display: inline-block; float: right; margin: -0.15rem 0;">
                    <link rel="stylesheet" type="text/css" href="/libs/share/css/share.min.css">
<div id="article-share">

    
    <div class="social-share" data-sites="twitter,facebook,google,qq,qzone,wechat,weibo,douban,linkedin" data-wechat-qrcode-helper="<p>微信扫一扫即可分享！</p>"></div>
    <script src="/libs/share/js/social-share.min.js"></script>
    

    

</div>

                </div>
            </div>
            
                <div id="reward">
    <a href="#rewardModal" class="reward-link modal-trigger btn-floating btn-medium waves-effect waves-light red">赏</a>

    <!-- Modal Structure -->
    <div id="rewardModal" class="modal">
        <div class="modal-content">
            <a class="close modal-close"><i class="fas fa-times"></i></a>
            <h4 class="reward-title">你的赏识是我前进的动力</h4>
            <div class="reward-content">
                <div class="reward-tabs">
                    <ul class="tabs row">
                        <li class="tab col s6 alipay-tab waves-effect waves-light"><a href="#alipay">支付宝</a></li>
                        <li class="tab col s6 wechat-tab waves-effect waves-light"><a href="#wechat">微 信</a></li>
                    </ul>
                    <div id="alipay">
                        <img src="/medias/reward/alipay.jpg" class="reward-img" alt="支付宝打赏二维码">
                    </div>
                    <div id="wechat">
                        <img src="/medias/reward/wechat.png" class="reward-img" alt="微信打赏二维码">
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    $(function () {
        $('.tabs').tabs();
    });
</script>

            
        </div>
    </div>

    

    

    

    

    

    

    

    

    

<article id="prenext-posts" class="prev-next articles">
    <div class="row article-row">
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge left-badge text-color">
                <i class="fas fa-chevron-left"></i>&nbsp;上一篇</div>
            <div class="card">
                <a href="/2025/05/01/1000002305-2247548590-1/">
                    <div class="card-image">
                        
                        <img src="/medias/frontcover/1000002305_2247548590_1.jpg" class="responsive-img" alt="“双一流”大学，牵手华为！">
                        
                        <span class="card-title">“双一流”大学，牵手华为！</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            
                        
                    </div>
                    <div class="publish-info">
                        <span class="publish-date">
                            <i class="far fa-clock fa-fw icon-date"></i>2025-05-01
                        </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-user fa-fw"></i>
                            ZejunCao
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E6%8A%80%E6%9C%AF%E5%89%8D%E6%B2%BF/">
                        <span class="chip bg-color">深度学习技术前沿</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge right-badge text-color">
                下一篇&nbsp;<i class="fas fa-chevron-right"></i>
            </div>
            <div class="card">
                <a href="/2025/05/01/1000002501-2247630768-1/">
                    <div class="card-image">
                        
                        <img src="/medias/frontcover/1000002501_2247630768_1.jpg" class="responsive-img" alt="2025美国科学院院士出炉！屠呦呦Bengio当选外籍院士，中科大校友领衔">
                        
                        <span class="card-title">2025美国科学院院士出炉！屠呦呦Bengio当选外籍院士，中科大校友领衔</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            
                        
                    </div>
                    <div class="publish-info">
                            <span class="publish-date">
                                <i class="far fa-clock fa-fw icon-date"></i>2025-05-01
                            </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-user fa-fw"></i>
                            ZejunCao
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/%E5%B0%8F%E7%99%BD%E5%AD%A6%E8%A7%86%E8%A7%89/">
                        <span class="chip bg-color">小白学视觉</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
    </div>
</article>

</div>



<!-- 代码块功能依赖 -->
<script type="text/javascript" src="/libs/codeBlock/codeBlockFuction.js"></script>



<!-- 代码语言 -->

<script type="text/javascript" src="/libs/codeBlock/codeLang.js"></script>


<!-- 代码块复制 -->

<script type="text/javascript" src="/libs/codeBlock/codeCopy.js"></script>


<!-- 代码块收缩 -->

<script type="text/javascript" src="/libs/codeBlock/codeShrink.js"></script>



    </div>
    <div id="toc-aside" class="expanded col l3 hide-on-med-and-down">
        <div class="toc-widget card" style="background-color: white;">
            <div class="toc-title"><i class="far fa-list-alt"></i>&nbsp;&nbsp;目录</div>
            <div id="toc-content"></div>
        </div>
    </div>
</div>

<!-- TOC 悬浮按钮. -->

<div id="floating-toc-btn" class="hide-on-med-and-down">
    <a class="btn-floating btn-large bg-color">
        <i class="fas fa-list-ul"></i>
    </a>
</div>


<script src="/libs/tocbot/tocbot.min.js"></script>
<script>
    $(function () {
        tocbot.init({
            tocSelector: '#toc-content',
            contentSelector: '#articleContent',
            headingsOffset: -($(window).height() * 0.4 - 45),
            collapseDepth: Number('0'),
            headingSelector: 'h2, h3, h4'
        });

        // Set scroll toc fixed.
        let tocHeight = parseInt($(window).height() * 0.4 - 64);
        let $tocWidget = $('.toc-widget');
        $(window).scroll(function () {
            let scroll = $(window).scrollTop();
            /* add post toc fixed. */
            if (scroll > tocHeight) {
                $tocWidget.addClass('toc-fixed');
            } else {
                $tocWidget.removeClass('toc-fixed');
            }
        });

        
        /* 修复文章卡片 div 的宽度. */
        let fixPostCardWidth = function (srcId, targetId) {
            let srcDiv = $('#' + srcId);
            if (srcDiv.length === 0) {
                return;
            }

            let w = srcDiv.width();
            if (w >= 450) {
                w = w + 21;
            } else if (w >= 350 && w < 450) {
                w = w + 18;
            } else if (w >= 300 && w < 350) {
                w = w + 16;
            } else {
                w = w + 14;
            }
            $('#' + targetId).width(w);
        };

        // 切换TOC目录展开收缩的相关操作.
        const expandedClass = 'expanded';
        let $tocAside = $('#toc-aside');
        let $mainContent = $('#main-content');
        $('#floating-toc-btn .btn-floating').click(function () {
            if ($tocAside.hasClass(expandedClass)) {
                $tocAside.removeClass(expandedClass).hide();
                $mainContent.removeClass('l9');
            } else {
                $tocAside.addClass(expandedClass).show();
                $mainContent.addClass('l9');
            }
            fixPostCardWidth('artDetail', 'prenext-posts');
        });
        
    });
</script>

    

</main>




    <footer class="page-footer bg-color">
    
        <link rel="stylesheet" href="/libs/aplayer/APlayer.min.css">
<style>
    .aplayer .aplayer-lrc p {
        
        display: none;
        
        font-size: 12px;
        font-weight: 700;
        line-height: 16px !important;
    }

    .aplayer .aplayer-lrc p.aplayer-lrc-current {
        
        display: none;
        
        font-size: 15px;
        color: #42b983;
    }

    
    .aplayer.aplayer-fixed.aplayer-narrow .aplayer-body {
        left: -66px !important;
    }

    .aplayer.aplayer-fixed.aplayer-narrow .aplayer-body:hover {
        left: 0px !important;
    }

    
</style>
<div class="">
    
    <div class="row">
        <meting-js class="col l8 offset-l2 m10 offset-m1 s12"
                   server="netease"
                   type="playlist"
                   id="503838841"
                   fixed='true'
                   autoplay='false'
                   theme='#42b983'
                   loop='all'
                   order='random'
                   preload='auto'
                   volume='0.7'
                   list-folded='true'
        >
        </meting-js>
    </div>
</div>

<script src="/libs/aplayer/APlayer.min.js"></script>
<script src="/libs/aplayer/Meting.min.js"></script>

    

    <div class="container row center-align"
         style="margin-bottom: 0px !important;">
        <div class="col s12 m8 l8 copy-right">
            Copyright&nbsp;&copy;
            
                <span id="year">2025</span>
            
            <a href="/about" target="_blank">ZejunCao</a>
            |&nbsp;Powered by&nbsp;<a href="https://hexo.io/" target="_blank">Hexo</a>
            |&nbsp;Theme&nbsp;<a href="https://github.com/blinkfox/hexo-theme-matery" target="_blank">Matery</a>
            
            <br>
            
            
            
                
            
            
                <span id="busuanzi_container_site_pv">
                &nbsp;|&nbsp;<i class="far fa-eye"></i>&nbsp;总访问量:&nbsp;
                    <span id="busuanzi_value_site_pv" class="white-color"></span>
            </span>
            
            
                <span id="busuanzi_container_site_uv">
                &nbsp;|&nbsp;<i class="fas fa-users"></i>&nbsp;总访问人数:&nbsp;
                    <span id="busuanzi_value_site_uv" class="white-color"></span>
            </span>
            
            <br>

            <!-- 运行天数提醒. -->
            
            <br>
            
        </div>
        <div class="col s12 m4 l4 social-link social-statis">
    <a href="https://github.com/ZejunCao" class="tooltipped" target="_blank" data-tooltip="访问我的GitHub" data-position="top" data-delay="50">
        <i class="fab fa-github"></i>
    </a>



    <a href="mailto:caozejun369@163.com" class="tooltipped" target="_blank" data-tooltip="邮件联系我" data-position="top" data-delay="50">
        <i class="fas fa-envelope-open"></i>
    </a>







    <a href="tencent://AddContact/?fromId=50&fromSubId=1&subcmd=all&uin=1378463428" class="tooltipped" target="_blank" data-tooltip="QQ联系我: 1378463428" data-position="top" data-delay="50">
        <i class="fab fa-qq"></i>
    </a>



    <a href="https://weibo.com/u/5915009280" class="tooltipped" target="_blank" data-tooltip="关注我的微博: https://weibo.com/u/5915009280" data-position="top" data-delay="50">
        <i class="fab fa-weibo"></i>
    </a>



    <a href="https://www.zhihu.com/people/Garfusion/posts" class="tooltipped" target="_blank" data-tooltip="关注我的知乎: https://www.zhihu.com/people/Garfusion/posts" data-position="top" data-delay="50">
        <i class="fab fa-zhihu1">知</i>
    </a>



</div>
    </div>
</footer>

<div class="progress-bar"></div>


    <!-- 搜索遮罩框 -->
<div id="searchModal" class="modal">
    <div class="modal-content">
        <div class="search-header">
            <span class="title"><i class="fas fa-search"></i>&nbsp;&nbsp;搜索</span>
            <input type="search" id="searchInput" name="s" placeholder="请输入搜索的关键字"
                   class="search-input">
        </div>
        <div id="searchResult"></div>
    </div>
</div>

<script type="text/javascript">
$(function () {
    var searchFunc = function (path, search_id, content_id) {
        'use strict';
        $.ajax({
            url: path,
            dataType: "xml",
            success: function (xmlResponse) {
                // get the contents from search data
                var datas = $("entry", xmlResponse).map(function () {
                    return {
                        title: $("title", this).text(),
                        content: $("content", this).text(),
                        url: $("url", this).text()
                    };
                }).get();
                var $input = document.getElementById(search_id);
                var $resultContent = document.getElementById(content_id);
                $input.addEventListener('input', function () {
                    var str = '<ul class=\"search-result-list\">';
                    var keywords = this.value.trim().toLowerCase().split(/[\s\-]+/);
                    $resultContent.innerHTML = "";
                    if (this.value.trim().length <= 0) {
                        return;
                    }
                    // perform local searching
                    datas.forEach(function (data) {
                        var isMatch = true;
                        var data_title = data.title.trim().toLowerCase();
                        var data_content = data.content.trim().replace(/<[^>]+>/g, "").toLowerCase();
                        var data_url = data.url;
                        data_url = data_url.indexOf('/') === 0 ? data.url : '/' + data_url;
                        var index_title = -1;
                        var index_content = -1;
                        var first_occur = -1;
                        // only match artiles with not empty titles and contents
                        if (data_title !== '' && data_content !== '') {
                            keywords.forEach(function (keyword, i) {
                                index_title = data_title.indexOf(keyword);
                                index_content = data_content.indexOf(keyword);
                                if (index_title < 0 && index_content < 0) {
                                    isMatch = false;
                                } else {
                                    if (index_content < 0) {
                                        index_content = 0;
                                    }
                                    if (i === 0) {
                                        first_occur = index_content;
                                    }
                                }
                            });
                        }
                        // show search results
                        if (isMatch) {
                            str += "<li><a href='" + data_url + "' class='search-result-title'>" + data_title + "</a>";
                            var content = data.content.trim().replace(/<[^>]+>/g, "");
                            if (first_occur >= 0) {
                                // cut out 100 characters
                                var start = first_occur - 20;
                                var end = first_occur + 80;
                                if (start < 0) {
                                    start = 0;
                                }
                                if (start === 0) {
                                    end = 100;
                                }
                                if (end > content.length) {
                                    end = content.length;
                                }
                                var match_content = content.substr(start, end);
                                // highlight all keywords
                                keywords.forEach(function (keyword) {
                                    var regS = new RegExp(keyword, "gi");
                                    match_content = match_content.replace(regS, "<em class=\"search-keyword\">" + keyword + "</em>");
                                });

                                str += "<p class=\"search-result\">" + match_content + "...</p>"
                            }
                            str += "</li>";
                        }
                    });
                    str += "</ul>";
                    $resultContent.innerHTML = str;
                });
            }
        });
    };

    searchFunc('/search.xml', 'searchInput', 'searchResult');
});
</script>

    <!-- 白天和黑夜主题 -->
<div class="stars-con">
    <div id="stars"></div>
    <div id="stars2"></div>
    <div id="stars3"></div>  
</div>

<script>
    function switchNightMode() {
        $('<div class="Cuteen_DarkSky"><div class="Cuteen_DarkPlanet"></div></div>').appendTo($('body')),
        setTimeout(function () {
            $('body').hasClass('DarkMode') 
            ? ($('body').removeClass('DarkMode'), localStorage.setItem('isDark', '0'), $('#sum-moon-icon').removeClass("fa-sun").addClass('fa-moon')) 
            : ($('body').addClass('DarkMode'), localStorage.setItem('isDark', '1'), $('#sum-moon-icon').addClass("fa-sun").removeClass('fa-moon')),
            
            setTimeout(function () {
            $('.Cuteen_DarkSky').fadeOut(1e3, function () {
                $(this).remove()
            })
            }, 2e3)
        })
    }
</script>

    <!-- 回到顶部按钮 -->
<div id="backTop" class="top-scroll">
    <a class="btn-floating btn-large waves-effect waves-light" href="#!">
        <i class="fas fa-arrow-up"></i>
    </a>
</div>


    <script src="/libs/materialize/materialize.min.js"></script>
    <script src="/libs/masonry/masonry.pkgd.min.js"></script>
    <script src="/libs/aos/aos.js"></script>
    <script src="/libs/scrollprogress/scrollProgress.min.js"></script>
    <script src="/libs/lightGallery/js/lightgallery-all.min.js"></script>
    <script src="/js/matery.js"></script>

    

    
    
    

    <!-- 雪花特效 -->
    

    <!-- 鼠标星星特效 -->
    

     
        <script src="https://ssl.captcha.qq.com/TCaptcha.js"></script>
        <script src="/libs/others/TencentCaptcha.js"></script>
        <button id="TencentCaptcha" data-appid="xxxxxxxxxx" data-cbfn="callback" type="button" hidden></button>
    

    <!-- Baidu Analytics -->

    <!-- Baidu Push -->

<script>
    (function () {
        var bp = document.createElement('script');
        var curProtocol = window.location.protocol.split(':')[0];
        if (curProtocol === 'https') {
            bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
        } else {
            bp.src = 'http://push.zhanzhang.baidu.com/push.js';
        }
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(bp, s);
    })();
</script>

    
    <script src="/libs/others/clicklove.js" async="async"></script>
    
    
    <script async src="/libs/others/busuanzi.pure.mini.js"></script>
    

    

    

    <!--腾讯兔小巢-->
    
    

    

    

    
    <script src="/libs/instantpage/instantpage.js" type="module"></script>
    

</body>

</html>
