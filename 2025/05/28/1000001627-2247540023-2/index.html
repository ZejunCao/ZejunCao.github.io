<!DOCTYPE HTML>
<html lang="zh-CN">


<head>
    <meta charset="utf-8">
    <meta name="keywords" content="边缘目标检测算法，碾压YOLO系，横扫BDD100K，算法效率起飞！, ZejunCao&#39;Blogs">
    <meta name="description" content="边缘目标检测算法，碾压YOLO系，横扫BDD100K，算法效率起飞！

仅用于站内搜索，没有排版格式，具体信息请跳转上方微信公众号内链接

以下文章来源于微信公众号：集智书童作者：小书童链接：https :&amp;#x2F;&amp;#x2F;mp. w">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="renderer" content="webkit|ie-stand|ie-comp">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="referrer" content="no-referrer-when-downgrade">
    <!-- Global site tag (gtag.js) - Google Analytics -->


    <title>边缘目标检测算法，碾压YOLO系，横扫BDD100K，算法效率起飞！ | ZejunCao&#39;Blogs</title>
    <link rel="icon" type="image/png" href="/favicon.png">
    


    <!-- bg-cover style     -->



<link rel="stylesheet" type="text/css" href="/libs/awesome/css/all.min.css">
<link rel="stylesheet" type="text/css" href="/libs/materialize/materialize.min.css">
<link rel="stylesheet" type="text/css" href="/libs/aos/aos.css">
<link rel="stylesheet" type="text/css" href="/libs/animate/animate.min.css">
<link rel="stylesheet" type="text/css" href="/libs/lightGallery/css/lightgallery.min.css">
<link rel="stylesheet" type="text/css" href="/css/matery.css">
<link rel="stylesheet" type="text/css" href="/css/my.css">
<link rel="stylesheet" type="text/css" href="/css/dark.css" media="none" onload="if(media!='all')media='all'">




    <link rel="stylesheet" href="/libs/tocbot/tocbot.css">
    <link rel="stylesheet" href="/css/post.css">




    
        <link rel="stylesheet" type="text/css" href="/css/reward.css">
    



    <script src="/libs/jquery/jquery-3.6.0.min.js"></script>

<meta name="generator" content="Hexo 7.3.0"></head>


<body>
    <header class="navbar-fixed">
    <nav id="headNav" class="bg-color nav-transparent">
        <div id="navContainer" class="nav-wrapper container">
            <div class="brand-logo">
                <a href="/" class="waves-effect waves-light">
                    
                    <img src="/medias/logo.png" class="logo-img" alt="LOGO">
                    
                    <span class="logo-span">ZejunCao&#39;Blogs</span>
                </a>
            </div>
            

<a href="#" data-target="mobile-nav" class="sidenav-trigger button-collapse"><i class="fas fa-bars"></i></a>
<ul class="right nav-menu">
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/" class="waves-effect waves-light">
      
      <i class="fas fa-home" style="zoom: 0.6;"></i>
      
      <span>首页</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/tags" class="waves-effect waves-light">
      
      <i class="fas fa-tags" style="zoom: 0.6;"></i>
      
      <span>标签</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/categories" class="waves-effect waves-light">
      
      <i class="fas fa-bookmark" style="zoom: 0.6;"></i>
      
      <span>分类</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/archives" class="waves-effect waves-light">
      
      <i class="fas fa-archive" style="zoom: 0.6;"></i>
      
      <span>归档</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/about" class="waves-effect waves-light">
      
      <i class="fas fa-user-circle" style="zoom: 0.6;"></i>
      
      <span>关于</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/contact" class="waves-effect waves-light">
      
      <i class="fas fa-comments" style="zoom: 0.6;"></i>
      
      <span>留言板</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/friends" class="waves-effect waves-light">
      
      <i class="fas fa-address-book" style="zoom: 0.6;"></i>
      
      <span>友情链接</span>
    </a>
    
  </li>
  
  <li>
    <a href="#searchModal" class="modal-trigger waves-effect waves-light">
      <i id="searchIcon" class="fas fa-search" title="搜索" style="zoom: 0.85;"></i>
    </a>
  </li>
  <li>
    <a href="javascript:;" class="waves-effect waves-light" onclick="switchNightMode()" title="深色/浅色模式" >
      <i id="sum-moon-icon" class="fas fa-sun" style="zoom: 0.85;"></i>
    </a>
  </li>
</ul>


<div id="mobile-nav" class="side-nav sidenav">

    <div class="mobile-head bg-color">
        
        <img src="/medias/logo.png" class="logo-img circle responsive-img">
        
        <div class="logo-name">ZejunCao&#39;Blogs</div>
        <div class="logo-desc">
            
            Never really desperate, only the lost of the soul.
            
        </div>
    </div>

    <ul class="menu-list mobile-menu-list">
        
        <li class="m-nav-item">
	  
		<a href="/" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-home"></i>
			
			首页
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/tags" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-tags"></i>
			
			标签
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/categories" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-bookmark"></i>
			
			分类
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/archives" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-archive"></i>
			
			归档
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/about" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-user-circle"></i>
			
			关于
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/contact" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-comments"></i>
			
			留言板
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/friends" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-address-book"></i>
			
			友情链接
		</a>
          
        </li>
        
        
        <li><div class="divider"></div></li>
        <li>
            <a href="https://github.com/blinkfox/hexo-theme-matery" class="waves-effect waves-light" target="_blank">
                <i class="fab fa-github-square fa-fw"></i>Fork Me
            </a>
        </li>
        
    </ul>
</div>


        </div>

        
            <style>
    .nav-transparent .github-corner {
        display: none !important;
    }

    .github-corner {
        position: absolute;
        z-index: 10;
        top: 0;
        right: 0;
        border: 0;
        transform: scale(1.1);
    }

    .github-corner svg {
        color: #0f9d58;
        fill: #fff;
        height: 64px;
        width: 64px;
    }

    .github-corner:hover .octo-arm {
        animation: a 0.56s ease-in-out;
    }

    .github-corner .octo-arm {
        animation: none;
    }

    @keyframes a {
        0%,
        to {
            transform: rotate(0);
        }
        20%,
        60% {
            transform: rotate(-25deg);
        }
        40%,
        80% {
            transform: rotate(10deg);
        }
    }
</style>

<a href="https://github.com/blinkfox/hexo-theme-matery" class="github-corner tooltipped hide-on-med-and-down" target="_blank"
   data-tooltip="Fork Me" data-position="left" data-delay="50">
    <svg viewBox="0 0 250 250" aria-hidden="true">
        <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
        <path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2"
              fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path>
        <path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z"
              fill="currentColor" class="octo-body"></path>
    </svg>
</a>
        
    </nav>

</header>

    



<div class="bg-cover pd-header post-cover" style="background-image: url('/medias/frontcover/1000001627_2247540023_2.jpg')">
    <div class="container" style="right: 0px;left: 0px;">
        <div class="row">
            <div class="col s12 m12 l12">
                <div class="brand">
                    <h1 class="description center-align post-title">边缘目标检测算法，碾压YOLO系，横扫BDD100K，算法效率起飞！</h1>
                </div>
            </div>
        </div>
    </div>
</div>




<main class="post-container content">

    
    <div class="row">
    <div id="main-content" class="col s12 m12 l9">
        <!-- 文章内容详情 -->
<div id="artDetail">
    <div class="card">
        <div class="card-content article-info">
            <div class="row tag-cate">
                <div class="col s7">
                    
                    <div class="article-tag">
                        
                            <a href="/tags/%E6%B1%9F%E5%A4%A7%E7%99%BD/">
                                <span class="chip bg-color">江大白</span>
                            </a>
                        
                    </div>
                    
                </div>
                <div class="col s5 right-align">
                    
                </div>
            </div>

            <div class="post-info">
                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-minus fa-fw"></i>发布日期:&nbsp;&nbsp;
                    2025-05-28
                </div>
                

                

                

                

                
            </div>
        </div>
        <hr class="clearfix">

        

        

        <div class="card-content article-card-content">
            <div id="articleContent">
                <p><a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/Sx0pyaYZFlw_UKRE_SBK6A">边缘目标检测算法，碾压YOLO系，横扫BDD100K，算法效率起飞！</a></p>
<blockquote>
<p>仅用于站内搜索，没有排版格式，具体信息请跳转上方微信公众号内链接</p>
</blockquote>
<p>以下文章来源于微信公众号：集智书童<br>作者：小书童<br>链接：https :&#x2F;&#x2F;mp. weixin.qq. com&#x2F;s&#x2F;AcTThN8XRFtgk3_DfiwC9g<br>本文仅用于学术分享，如有侵权，请联系后台作删文处理<br>导读<br>本文介绍一种结合RAViTBackbone与RepFPNNeck单阶段目标检测框架，Fast-COS。在BDD100K和TJU-DHD数据集上，Fast-COS相较FCOS精度提升5. 5%，GPU推理速度提升75. 9%。广泛测试表明，该框架适用于资源受限环境，未来可进一步优化以增强边缘设备适应性。<br>论文链接：https :&#x2F;&#x2F;arxiv. org&#x2F;abs&#x2F;2502. 07417<br>感知系统是自动驾驶系统的核心元素，在确保安全方面发挥着关键作用。驾驶场景感知系统本质上是一个目标检测任务，需要在准确性和处理速度之间取得平衡。许多当代方法侧重于提高检测精度，但往往忽视了在计算资源有限时实时检测能力的重要性。因此，研究针对驾驶场景的高效目标检测策略至关重要。<br>本文介绍了Fast-COS，这是一个专为驾驶场景应用设计的单阶段目标检测框架。研究从对Backbone网络的分析开始，考虑了宏观和微观架构设计，得出了重参化注意力视觉Transformer（RAViT）。RAViT利用重参化多尺度深度卷积（RepMSDW）和重参化自注意力（RepSA）来提高计算效率和特征提取。在GPU、边缘和移动平台上的广泛测试中，RAViT在ImageNet-1K数据集上实现了81. 4%的Top-1准确率，与ResNet、FastViT、RepViT和EfficientFormer等可比Backbone模型相比，显著提高了吞吐量。此外，将RepMSDW集成到特征金字塔网络中形成RepFPN，实现了快速和多尺度的特征融合。<br>Fast-COS增强了驾驶场景中的目标检测，在BDD100K数据集上达到了57. 2%的AP50分数，在TJU-DHD交通数据集上达到了80. 0%。它在效率上超过了领先模型，与FCOS、YOLOF和RetinaNet相比，GPU推理速度提高了高达75. 9%，在边缘设备上的吞吐量提高了1. 38倍。这些发现将Fast-COS确立为一个高度可扩展且可靠的解决方案，适用于实时应用，尤其是在资源受限的环境，如自动驾驶系统中。<br>各种传感器作为感知系统，用于收集实时交通数据，实现独立导航[ 1]。摄像头提供必要的、高分辨率的视觉数据，这些数据对于驾驶场景图像处理任务，如目标检测[ 2]至关重要。在复杂场景中，对驾驶环境的鲁棒感知对自动驾驶汽车至关重要。这需要高精度、实时处理和容错性。准确识别和预测物体运动，执行高效的实时处理，避免可能导致交通拥堵或事故的决策延迟，以及在恶劣天气或低光照条件下确保运行，都是至关重要的。有效的目标检测算法对于基于摄像头的感知系统在自动驾驶汽车中的安全性和有效性至关重要[ 3]。<br>在深度学习中的当代目标检测架构中，结构通常由Backbone网络、Neck和Head检测器元素组成[ 4]-[6]。检测器主要分为两类：两阶段和单阶段。两阶段模型，如R-CNN系列[ 7]、[8]，强调区域Proposal和特征提取。这些模型以精确的目标定位而闻名，但由于需要大量的区域Proposal，计算成本较高。相反，单阶段检测器，如YOLO[ 9]或RetinaNet[ 10]，在单个网络流中执行目标检测和定位回归。单阶段检测器的一种变体是全卷积单阶段检测器（FCOS）[11]、[12]，它通过基于每个像素的预测来采用Anchor-Free点策略，从而消除了对预定义Anchor框的需求，提高了计算效率。然而，FCOS因其Backbone网络和Neck结构效率低下而受到批评。<br>在整个十年间，卷积神经网络（CNNs），尤其是ResNet[ 13]，因其众多下游任务[ 14]中的卓越性能而被频繁用作Backbone网络，包括生物识别[ 15]、[16]、医学分割[ 17]和图像去雾[ 18]。然而，由于感受野的限制和短程依赖，它们在遮挡问题上遇到了挑战，尤其是在驾驶场景目标检测[ 19]中尤为普遍。最近，基于Transformer的视觉模型在各种计算机视觉应用中作为Backbone网络[ 20]或作为分割编码器-解码器架构[ 21]表现出非凡的成功，利用其全局感受野和长程依赖性，超越了CNN的性能。然而，这些模型由于二次计算复杂度，通常计算量较大。例如，原始视觉Transformer（ViT）[22]需要8500万到6. 32亿个参数来进行ImageNet分类。这种复杂性为在资源受限的设备上部署，如移动和边缘设备，带来了挑战，并且可能不适合某些应用，如驾驶场景目标检测[ 19]和资源有限的平台部署。<br>几种高效的设计方法已被开发出来以提高Transformer效率，或可在移动或边缘设备中实现[ 23]-[27]。最具创新性的方法是将Transformer与卷积神经网络（CNNs）集成[ 23]，[25]。一些策略引入了一种具有线性复杂度的创新自注意力模型[ 26]和一个具有维敏感架构[ 24]，[27]。这些方法表明，CNNs在将Transformer部署到资源受限设备中起着至关重要的作用。另一方面，人们还关注在架构层面设计以快速推理为导向的Transformer视觉模型[ 28]-[30]。许多方法通过使用的主干网络，在初始架构阶段从非常低的分辨率中实现了快速推理。此外，还引入了创新的Self-Attention机制以最小化计算冗余[ 29]，[30]。虽然这些方法在快速GPU推理中表现良好，但对于核心处理器较少的资源受限硬件上的推理效果较差。<br>与ViTs的复杂架构相比，最近CNN的发展受到了启发[ 31]-[33]。它们不像传统的CNN[ 34]、[35]那样使用结合空间和通道特征提取，而是根据ViT的架构分别设计。为了捕捉全局空间上下文，一些CNN尝试将核大小增加到[ 31]、[32]，而不是使用常见的[ 33]。此外，在[ 36]、[37]中，它们将核大小扩展到以获得更大的感受野。然而，极大的核大小会显著增加内存访问和参数，使得优化变得具有挑战性。<br>为了解决性能与速度之间的权衡，作者引入了RAViT，即重参化注意力视觉Transformer。这种混合Transformer结合了一个可重构的Token混合器，该混合器将注意力与多尺度大核CNN相结合。在宏观层面，RAViT将轻量级ViT[ 28]-[30]的一般框架与最新的基于CNN的设计[ 33]相融合。在微观层面，引入了重参化多尺度深度wise卷积（RepMSDW）和重参化自注意力（RepSA）以维持全局和局部依赖性。利用RAViT作为Backbone网络，作者优化了FCOS，使其更加高效和快速，因此作者称之为快速卷积单阶段目标检测器或Fast-Cos。不仅Backbone网络，在NeckLevel，FCOS的特征金字塔网络（FPN）通过RepFPN得到增强，它利用了RepMSDW。广泛的评估确认了其在各种视觉基准上的效率，包括用于Backbone网络图像分类的ImageNet-1K，以及用于驾驶场景中目标检测的BDD100K和TJU-DHD交通。<br>总之，作者的主要贡献包括：<br>1. 作者提出RAViT，一种具有多尺度大核重参化和部分自注意力的混合视觉Transformer。<br>2. 作者展示了RAViT作为提取多尺度特征的主干网络的有效性，并强调了其增强FCOs目标检测器的潜力，在BDD100K和TJU-DHD数据集上实现了高精度。通过利用RepMSDW，作者优化了原始FCOSFPNNeck的多尺度特征提取，展示了RepFPN作为Neck与RAViT主干网络结合，形成Fast-FCOS目标检测器，在驾驶场景数据集上实现卓越精度的作用。<br>3. 作者表明，RAViT在各种平台上表现出低延迟，包括移动设备、边缘设备和桌面GPU，这将显著促进驾驶场景目标检测系统在多种硬件上的应用。<br>近期在高效视觉Transformer方面的进展始于MobileViTs[ 25]，它结合了MobileNets的效率与视觉Transformer（ViTs）的全局建模能力。EfficientFormers[ 24]、[27]展示了一种特征维度感知的设计，该设计采用硬件优化的4D模块和有效的3D多头自注意力（MHSA）块。FastViT[ 32]通过整合深度卷积与结构重参化，提升了模型容量和效率。EdgeNext[ 23]应用局部-全局块以更好地结合MHSA和卷积。SHViT[ 30]通过应用于部分通道的单头自注意力（SHSA）机制来解决计算冗余问题。EMO[ 38]通过将窗口自注意力与倒置Bottleneck卷积合并为一个单一块来解决简洁性问题。<br>最初，像AlexNet和GoogLeNet这样的传统CNN在早期架构中偏好使用大核，但VGG[ 39]将重点转向使用堆叠的核。InceptionNets[ 40]、[41]通过将卷积分解为连续的和操作来提高计算效率。SegNeXt[ 42]通过结合和卷积扩展了有效核大小，以用于语义分割任务。MogaNet[ 43]采用了多尺度空间聚合块，利用扩张卷积来捕捉判别性特征。ConvNeXt[ 31]通过使用深度卷积进行现代CNN设计实验，反映了SwinTransformer[ 20]的架构策略。InceptionNeXt[ 44]通过将大核深度卷积分为四个并行分支来提高吞吐量和性能。SKNet[ 45]和LSKNet[ 46]在通道和空间维度上均采用了多分支卷积。此外，RepLKNet[ 36]使用SRP将核大小扩展到，实现了与SwinTransformers相当的性能。<br>近期研究，如RepVGG[ 39]，表明重新参数化Shortcut可以降低内存访问成本。为了提高效率，先前的工作如MobileOne[ 47]已经利用了分解的k×k卷积，结合深度卷积或分组卷积，随后再进行1×1点卷积。这种方法显著提升了整体模型效率，尽管参数数量的减少可能会导致容量降低。最近，类似[ 48]中提出的tokenmixer的重新参数化MLP，称为RepMLPNet。据作者所知，在混合Transformer架构中，尚未探索使用结构化重新参数化来移除具有多尺度卷积的Shortcut。此外，重新参数化卷积与自注意力机制的组合也尚未被探索。<br>近期研究，如RepVGG[ 39]，表明重新参数化Shortcut可以降低内存访问成本。为了提高效率，先前的工作，如MobileOne[ 47]，已经利用了分解的卷积，并结合深度卷积或分组卷积，随后再进行点卷积。这种方法显著提升了整体模型的效率，尽管参数数量的减少可能会导致容量降低。最近，如[ 48]中提出的tokenmixer这样的重新参数化MLP，被称为RepMLPNet。据作者所知，在混合Transformer架构中，使用结构化重新参数化来移除具有多尺度卷积的Shortcut之前尚未被探索。此外，重新参数化卷积与自注意力机制的组合也尚未被探索。<br>在本节中，提出了RAViT混合TransformerBackbone网络。首先，为了适应资源有限的硬件，作者从宏观层面分析了其架构。然后，在微观层面开发了该架构。在微观层面，作者提出使用重参化多尺度深度卷积（RepMSDW）代替计算成本高昂的多头自注意力（MHSA）作为特征或Token混合器，尤其是在高分辨率的情况下。作者还提出了重参化自注意力（RepSA），将RepMSDW与自注意力相结合，以平衡特征中的局部和全局空间理解。随后，将RAViT用于改进FCOs，以在驾驶场景目标检测中执行下游任务。<br>大多数最近关于视觉Transformer的宏观设计都基于MetaFormer[ 49]、[50]的特征金字塔架构，如图1所示，该架构堆叠了两个残差块。该架构以一个Stem模块开始，该模块可能包含一个[ 49]或两个[ 23]、[24]、[33]或三个块[ 29]、[30]，这些块使用2步长的卷积。在宏观架构中，包含一个用于空间特征提取的tokenmixer块，之后是通道mixer块。每个块包含一个归一化层和残差或Shortcut，以稳定损失并推进训练过程。假设是第i阶段的特征图，具有的分辨率和个通道数；块的详细情况在方程1中解释。<br>TokenMicer(.)算子通常配置为卷积混洗器或自注意力[ 50]。ChannelMicer(.)块包含由两个线性全连接层和一个单激活函数组成的FFN(FFN)，该激活函数可以用公式2表示。<br>和是层权重，是扩展比，默认值为3，和是全连接层的偏置权重。操作采用激活函数进行选择，因为它根据[ 33]在准确性和推理速度之间取得了平衡。<br>为了构建适用于移动和边缘设备的既高效又低成本的模型，作者在宏观设计层面分析了架构。首先，将dwconv作为Token混合器融入架构，作者将3阶段架构与[ 28]-[30]中使用的stem进行比较，并将4阶段架构与[ 23]、[24]、[32]中常用stem进行比较。<br>如表6所示，V1与V2的比较表明，即使是带有stem的3阶段架构也能将GPU吞吐量提高3倍。然而，它对边缘和移动设备上的推理延迟没有显著影响。因此，在RAViT中，作者决定使用4阶段架构，并采用stem。<br>重参化多尺度深度可分离卷积（RepMSDW），如图1（b）所示，灵感来源于[ 41]、[44]，该策略包含多个具有不同核大小的分支深度可分离卷积，以扩展有效感受野和特征提取。通过整合这种多尺度策略，RAViT旨在复制多个范围建模能力，同时保持局部性和效率。RepMSDW的公式描述如公式3所示。<br>其中，表示第i阶段的特征图，该特征图将在通道维度上分割成。每个特征将被输入到不同的深度卷积（DwC）分支中，其中表示最大的卷积核大小，表示等于的平方核大小，属于自然数集。然后，每个输出分支沿着通道进行拼接（Cat(.)）。根据[ 39]中的重新参数化过程，拼接分支与主以及批归一化层（BN(.)）之间的和将被重新参数化为单个深度卷积，记为。<br>表5展示了所提出的RepMSDW的有效性。与具有平方且未进行重新参数化的单个分支相比，重新参数化的多分支核在牺牲推理速度的同时具有更高的准确率。接下来，作者尝试将最后两个阶段的RepMSDW核大小从增加到。如表6所示，从V2到V3的核大小增加可以将准确率提高到，同时仅在移动和边缘设备上造成和的延迟下降。将RepMSDW用作token混合器，作者的设计在准确率上与FastViT-T12[ 32]相似；然而，在RAViT中，移动和边缘设备的推理速度分别快了和。<br>重参化自注意力（RepSA）扩展了空间聚合，以达到卷积的局限性——长距离依赖。RepSA使用从RepMSDW投影出的四分之一通道的单头自注意力，具体细节如图1（c）所示。通常，RepSA的公式描述如下：<br>其中，，，，和，，，以及表示线性操作权重，用于将特征投影到Query、Key和Value上。注意力分数是经过缩放点积和softmax归一化后，在、和之间的结果，其中维度和等于16，配置为。最后，RepSA的输出是通过线性权重对局部特征和全局注意力图进行投影的结果。<br>作者通过采用所提出的RAViT作为快速驾驶场景目标检测的Backbone网络，增强了FCOS。此外，作者在FCOS的Neck部分引入了重参化特征金字塔网络（FPN）以进行多尺度特征提取。<br>如图2所示，作者利用RAViTBackbone网络的三种特征层和，并将典型FCOSFPN中的原始卷积替换为在两个尺度特征聚合后的一系列ReMSDW和卷积。由于ReMSDW具有多个核尺度，它能够提取不同尺度的空间特征，并且可以通过重参化来加速推理阶段。<br>与原始的FCOSFPN将Backbone网络的三级特征扩展到五级并使用步长因子相比，作者在共享Head仅使用三级特征进行目标分类、中心度和边界框回归。由于作者只使用三个Level的特征，回归范围在回归Head配置为0,128,256和512。由于特征Level的不同大小，回归范围针对每个Level进行调整。的回归范围为，为，为。<br>为了评估RAViTBackbone网络和Fast-COS的有效性，作者进行了多项测试。作者选择了包含1000个类别的ImageNet-1K数据集作为Backbone网络的图像分类基准测试。作者还对COCO数据集上的实例分割进行了Backbone网络评估测试。<br>在特定任务中，作者通过结合RepFPN来提升Fast-COS，在BDD100K和TJU-DHD-traffic数据集上执行驾驶场景目标检测。由于FLOPs并不直接影响计算复杂度，作者使用吞吐量和延迟指标，这些指标在三个不同范围的宽泛应用处理设备上进行了测试，包括GPURTX3090、iPhone15Pro上的神经网络单元（NPU）作为移动处理单元，以及JetsonOrinNano作为边缘设备处理单元，将RAViT和Fast-COS与其他最先进模型进行了比较。这一广泛的基准测试将代表不同硬件平台上的实时性能。<br>1）设置：作者使用ImageNet-1K作为最流行的图像分类基准数据集来评估RAViT。ImageNet-1K包含1000个类别，用于训练的有120万张图像，用于验证的有50000张图像。作者遵循[ 20]中的训练方案，每个RAViT模型变种的训练总共有300个epoch，分辨率为。数据增强和正则化方法包括多种方法，如RandAugment、Mixup、CutMix、RandomErasing、权重衰减、标签平滑和随机深度。对于大多数RAViT模型，作者使用AdamW优化器，基础学习率为0. 004，总批处理大小为2046，在GPU上进行训练。<br>作者还在COCO数据集上进行了实验，COCO数据集是广泛用于基于MaskR-CNN的目标检测和实例分割的基准数据集。MaskR-CNN的Backbone网络被RAViT所取代，RAViT利用多尺度卷积和自注意力机制来提升特征提取能力。COCO数据集的训练集用于模型训练，而验证集用于评估，遵循标准的COCO指标，包括边界框检测和分割Mask的平均精度（mAP）。<br>作者通过在两种类型的资源受限的设备硬件和一台桌面GPU上进行的推理延迟测试来评估性能。对于移动设备性能评估，使用了iPhone15Pro。所有模型都转换为CoreML格式，并在先前的20次循环预热之后，每个模型都经过50次推理循环。平均推理时间作为评估指标。为了评估边缘设备硬件，选择JetsonOrinNano。模型被调整为ONNX格式，以便在边缘设备上进行延迟测量。在边缘设备评估中，20秒的预热时间之后，进行1000次推理循环。<br>2）在ImageNet-1K上的基准测试：表2中展示的比较分析突出了RAViT变体在ImageNet1K数据集上与最先进模型的性能。作者评估了包括GPU、移动NPU和边缘设备在内的各种硬件平台，以提供一个广泛的应用说明作为Backbone。<br>与最近的最先进模型相比，RAViT模型在准确性和计算效率之间表现出有竞争力的权衡。例如，RAViT-M26达到了81. 4%的Top-1准确率，同时实现了2. 27倍的GPU吞吐量、2倍的NPU延迟和1. 8倍的边缘设备延迟，相较于PoolFormer-S36和Swin-T。RAViT-M26在保持与最近移动视觉Transformer（如RepViT）相似的NPU和边缘设备延迟的同时，实现了更高的0. 2%Top-1准确率，展示了其架构效率。同样，RAViT-M26在保持比FastViT-SA12高0. 8%的Top-1准确率的同时，实现了4%更快的移动NPU推理速度。<br>RAViT模型在不同配置下均能持续实现高精度。尽管MobileOne也使用了重参化技术，但RAViT的混合Transformer架构在精度和速度之间表现出权衡。例如，RAViT-S22在具有更快的GPU吞吐量、更快的MobileNPU延迟和更快的Edge设备延迟的情况下，仍能超越MobileOneS4。RAViT模型在提供优越精度的同时实现了更快的GPU、MobileNPU和Edge设备推理，展示了其在现实部署场景中的灵活性和有效性。<br>表1001展示了在COCOval2017数据集上，与MaskR-CNN结合使用的RAViTBackbone网络的评估结果，并与其他最先进的方法进行了比较。评估指标包括边界框平均精度（APb）、Mask平均精度（APm）、计算复杂度（FLOPs）、参数大小以及GPU和EDGE设备上的延迟。结果表明，RAViT在分割精度和计算效率之间实现了良好的平衡。<br>RAViTBackbone网络在边界框和Mask精度方面均展现出竞争或优越的性能。RAViT-S26实现了40. 4的和37.2的，超过了PVT-S和PoolFormer-S24。RAViT-M26在所有方法中取得了最高分，达到41. 6%，达到38. 9%，超过了RepViT-M1. 1，在仅使用卷积混洗器的情况下实现了精度提升，同时保持了相当的效率。这些结果验证了RAViT架构在提升实例分割性能方面的有效性。<br>延迟和推理速度进一步突显了RAViT架构的效率。RAViT-S26实现了最高的GPU推理速度，达到每秒40. 0张图像，显著优于PVT-S，速度是其的2. 4倍，比RepViTM1. 1快8.25%。在边缘设备上，RAViT-S26实现了最低的延迟，为284毫秒，使其非常适合实时应用。RAViT-M26也提供了有竞争力的边缘延迟，为334毫秒，在比较中优于其他几种方法。<br>与PoolFormer、PVT和RepViT相比，提出的RAViT架构在准确性和效率之间取得了极佳的平衡。RAViT-M26在评估的模型中实现了最高的准确率，而RAViT-S26则因其最低的延迟和高速推理而脱颖而出。这些结果证明了RAViT的可扩展性，提供了轻量级和高性能的变体，以满足多样化的部署场景。总之，提出的RAViTBackbone网络非常适合性能驱动和延迟关键的应用，巩固了其在实例分割任务中的价值。<br>1）设置：所提出的模型在两个高分辨率、大规模数据集上进行了测试：BDD100K和TJU-DHDtraffic，这两个数据集都适用于从驾驶员视角评估检测网络。这些数据集包括多样化的场景，如城市街道和住宅区，分别包含184万和239,980个标注的边界框。BDD100K包含10个类别，包括公交车和汽车，而TJU-DHD覆盖5个类别，如行人和骑自行车者，这些类别在不同的光照条件下都有涵盖。两个数据集都提供了各种天气条件下的场景，为现实世界模型测试提供了宝贵资源。组织结构包括TJU-DHDTraffic的45,266张训练图像和5,000张验证图像，以及BDD100K的70,000张训练图像和10,000张验证图像。<br>在驾驶场景目标检测实验中，作者在训练和评估阶段均使用像素的输入尺寸。训练过程中使用4块NVIDIAGPU，每块GPU处理8张图像的小批量。AdamW优化器控制训练过程，初始学习率为0. 00o1，在第8和第11个epoch时减少10倍。模型使用RAViT进行端到端训练，并从预训练权重初始化以提高学习效率。为了提高鲁棒性，应用了数据增强，包括随机翻转和调整大小。在推理阶段，记录每张图像前100个检测到的边界框以评估性能。</p>
<p>在TJU-DHD交通数据集上，使用RAViTM26作为Backbone网络，整体AP提升了1. 3%，预测大型物体（AP_l）的准确性提升了38%。在相同的输入尺寸配置（1333×800）下，所提出的RAViTBackbone网络相比原始FCOs，检测速度提高了44. 5%。为了达到与BDD100K测试相当的检测速度，对Fast-COS模型变体进行了评估，输入尺寸为1280×720像素。在此配置下，Fast-COs相对于原始FCOS，检测速度提升了49. 6%，同时保持了与使用更大输入尺寸训练的FCOS-RAViT变体相似的预测准确性。<br>在采用JetsonOrinNano边缘设备并使用ONNX框架进行的评估中，Fast-COs变体在采用RAViT-S26时观察到峰值性能，在驾驶场景数据集测试中实现了9. 3FPS的预测速度。尽管比YOLOF-ResNet50慢6. 5%，但Fast-COS与RAViT-S26结合在BDD100K测试中整体平均精度AP提高了26. 9%。全面的硬件评估表明，虽然一些模型可以超过30FPS的GPU推理速度，但在边缘设备上进行优化对于实现至少15FPS以使其作为实时驾驶场景目标检测硬件选项是必要的。<br>1. 多尺度在RepMSDW中的应用及与SelfAttention的结合：作者对多尺度卷积核大小进行了消融研究，并将其与仅平方核重参化和无核重参化配置进行了比较。这项分析特别使用了RAViT-S22变体。如表5所示，在重参化过程中采用多尺度核大小，在ImageNet1K数据集上提高了分类准确率。使用多尺度重参化相较于单平方重参化提高了0. 12%，如[ 32]、[33]、[39]所述，相较于无重参化配置提高了0. 22%。鉴于RepMSDW在捕捉长依赖关系方面存在限制，作者评估了其与自注意力技术的集成，该技术被应用于Transformer模型[ 20]、[24]、[29]。最初，作者将RepMSDW集成到多头自注意力（MHSA）中，用RepMSDW替代了[ 27]中描述的DwConv。这一修改将准确率提高到79. 2%。然而，MHSA需要大量的数组变换，这影响了GPU吞吐量和NPU延迟。随后，作者采用了单头注意力（SA），如[ 30]中提出的那样，以解决MHSA中的计算冗余。将RepMSDW与SA结合将准确率提高到79. 6%，同时保持了GPU吞吐量和NPU延迟的效率。<br>2. RAViTBackbone架构中的组合：在移除RepMSDW和RepSA后，作者还对宏观架构进行了消融研究。研究从3阶段（V1）和4阶段（V2）架构的比较开始。这一分析的结果详细地见第IMI-A节，其中V2被采用作为Baseline配置。随后，作者在第三阶段和第四阶段逐步增加RepMSDw核大小，从增加到（V3），使Top-1准确率提高了，但推理速度分别降低了NPU、EDGE和GPU的、和。在第四阶段（V4）引入RepSA后，准确率提高了，但推理速度在NPU、EDGE和GPU上分别降低了、和。在最终的消融实验中，作者在第三阶段和第四阶段都应用了RepSA，使准确率提高了，尽管在NPU、GPU和EDGE上的推理速度分别降低了、和。最终，V4被选为RAViT主干的主体配置，以在速度和准确率之间取得平衡。<br>3. Fast-COS剪枝：表4展示了使用RAViT变体作为Backbone网络和RepFPN作为原始FCOSHead检测器中间组件的Fast-COS剪枝研究。与在BDD100K数据集上使用ResNet-101的标准FCOS相比，RAViT-M26的引入分别提高了小物体（APs）和大物体（APl）的检测精度4. 8%和1. 9%。采用可重新参数化的RAViTBackbone网络，特别是通过RepMSDW残差连接重新参数化，将GPU推理速度提升了62. 1%。将RepMSDW集成到FPN中，APl、APm和APs分别记录了2. 7%、3. 9%和14. 2%的显著提升。此外，仅使用三个特征提取Level的RepFPN版本，将GPU推理速度提升了75. 9%。<br>图3展示了Fast-COS与Baseline算法检测结果的比较。图像来源于BDD验证集，该集包含了城市和郊区的交通场景以及恶劣天气条件下的交通场景。观察检测结果，可以看出Fast-COS通过重新参数化的多尺度核大小卷积和重新参数化的自注意力机制，有效地解决了遮挡问题（如车辆之间的遮挡）并提升了相对于Baseline的检测性能。这在检测小型物体（如信号灯、交通标志或远处的行人）时尤为明显。<br>通过扩展解释，在第一组和第二组示例中表明，在白天城市交通场景中，Fast-COS能够识别出位于相当距离处的多个交通标志，以及背景中遮挡的公交车和汽车。相比之下，Baseline方法在预测能力方面不足。此外，在第三组和第四组中，Fast-COS即使在夜间条件下，也能有效地识别出位于两个较大物体之间的小型且部分隐藏的车辆。<br>本文提出了一种名为Fast-COS的创新型单阶段目标检测框架，该框架针对实时驾驶场景应用进行了优化。通过结合新颖的重参化注意力视觉Transformer（RAViT）作为混合TransformerBackbone网络，以及重参化特征金字塔网络（RepFPN）以提取跨多个尺度的特征，Fast-COS实现了卓越的准确性和计算效率。<br>本研究的重点发现表明，所提出的框架显著提高了准确性和推理速度之间的平衡。在ImageNet-1K上的Top-1准确率达到81. 4%，RAViT在GPU、边缘和移动推理速度方面优于FastViT、RepViT和EfficientFormer等其他混合Transformer。RAViT与RepFPN的结合构建的Fast-COS在BDD100K和TJU-DHDTraffic等具有挑战性的驾驶场景数据集上实现了最先进的性能，优于FCOS和RetinaNet等传统模型。RepMSDW和RepSA的集成增强了局部和全局空间理解，同时确保了适合资源受限硬件的轻量级操作。<br>此外，在GPU和边缘设备上的广泛测试揭示了Fast-COS的可扩展性和实时效率。该框架相较于领先模型，实现了高达75. 9%的GPU推理速度提升和1. 38倍的吞吐量增加，使其成为在各种条件和环境下自动驾驶系统的理想选择。未来的研究将聚焦于进一步针对边缘设备硬件平台的架构优化，例如采用量化技术进行部署。</p>
<p>欢迎加入《AI未来星球》，一起成长<br>扫描下方二维码即可加入~<br>你可以获得什么？<br>1、大白之前花费10W+购买，AI行业各场景私有数据集下载，星球内倾情分享；2、AI行业研发、产品、商业落地问题咨询（目前AI公司创业中），都可获高质量解答，有效期一年，无限次提问，有问必答。3、定期邀请AI行业各类嘉宾分享，创业&#x2F;商业等方面的经验！<br>帮助你解决遇到的实际问题，升职加薪！<br>大家一起加油！</p>

                
            </div>
            <hr/>

            

    <div class="reprint" id="reprint-statement">
        
            <div class="reprint__author">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-user">
                        文章作者:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="/about" rel="external nofollow noreferrer">ZejunCao</a>
                </span>
            </div>
            <div class="reprint__type">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-link">
                        文章链接:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="https://zejuncao.github.io/2025/05/28/1000001627-2247540023-2/">https://zejuncao.github.io/2025/05/28/1000001627-2247540023-2/</a>
                </span>
            </div>
            <div class="reprint__notice">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-copyright">
                        版权声明:
                    </i>
                </span>
                <span class="reprint-info">
                    本博客所有文章除特別声明外，均采用
                    <a href="https://creativecommons.org/licenses/by/4.0/deed.zh" rel="external nofollow noreferrer" target="_blank">CC BY 4.0</a>
                    许可协议。转载请注明来源
                    <a href="/about" target="_blank">ZejunCao</a>
                    !
                </span>
            </div>
        
    </div>

    <script async defer>
      document.addEventListener("copy", function (e) {
        let toastHTML = '<span>复制成功，请遵循本文的转载规则</span><button class="btn-flat toast-action" onclick="navToReprintStatement()" style="font-size: smaller">查看</a>';
        M.toast({html: toastHTML})
      });

      function navToReprintStatement() {
        $("html, body").animate({scrollTop: $("#reprint-statement").offset().top - 80}, 800);
      }
    </script>



            <div class="tag_share" style="display: block;">
                <div class="post-meta__tag-list" style="display: inline-block;">
                    
                        <div class="article-tag">
                            
                                <a href="/tags/%E6%B1%9F%E5%A4%A7%E7%99%BD/">
                                    <span class="chip bg-color">江大白</span>
                                </a>
                            
                        </div>
                    
                </div>
                <div class="post_share" style="zoom: 80%; width: fit-content; display: inline-block; float: right; margin: -0.15rem 0;">
                    <link rel="stylesheet" type="text/css" href="/libs/share/css/share.min.css">
<div id="article-share">

    
    <div class="social-share" data-sites="twitter,facebook,google,qq,qzone,wechat,weibo,douban,linkedin" data-wechat-qrcode-helper="<p>微信扫一扫即可分享！</p>"></div>
    <script src="/libs/share/js/social-share.min.js"></script>
    

    

</div>

                </div>
            </div>
            
                <div id="reward">
    <a href="#rewardModal" class="reward-link modal-trigger btn-floating btn-medium waves-effect waves-light red">赏</a>

    <!-- Modal Structure -->
    <div id="rewardModal" class="modal">
        <div class="modal-content">
            <a class="close modal-close"><i class="fas fa-times"></i></a>
            <h4 class="reward-title">你的赏识是我前进的动力</h4>
            <div class="reward-content">
                <div class="reward-tabs">
                    <ul class="tabs row">
                        <li class="tab col s6 alipay-tab waves-effect waves-light"><a href="#alipay">支付宝</a></li>
                        <li class="tab col s6 wechat-tab waves-effect waves-light"><a href="#wechat">微 信</a></li>
                    </ul>
                    <div id="alipay">
                        <img src="/medias/reward/alipay.jpg" class="reward-img" alt="支付宝打赏二维码">
                    </div>
                    <div id="wechat">
                        <img src="/medias/reward/wechat.png" class="reward-img" alt="微信打赏二维码">
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    $(function () {
        $('.tabs').tabs();
    });
</script>

            
        </div>
    </div>

    

    

    

    

    

    

    

    

    

<article id="prenext-posts" class="prev-next articles">
    <div class="row article-row">
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge left-badge text-color">
                <i class="fas fa-chevron-left"></i>&nbsp;上一篇</div>
            <div class="card">
                <a href="/2025/05/28/1000001627-2247540023-1/">
                    <div class="card-image">
                        
                        <img src="/medias/frontcover/1000001627_2247540023_1.jpg" class="responsive-img" alt="CVPR2025突破数据瓶颈！视觉少样本异常检测，无需训练生成真实多样本！(附论文及源码)">
                        
                        <span class="card-title">CVPR2025突破数据瓶颈！视觉少样本异常检测，无需训练生成真实多样本！(附论文及源码)</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            
                        
                    </div>
                    <div class="publish-info">
                        <span class="publish-date">
                            <i class="far fa-clock fa-fw icon-date"></i>2025-05-28
                        </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-user fa-fw"></i>
                            ZejunCao
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/%E6%B1%9F%E5%A4%A7%E7%99%BD/">
                        <span class="chip bg-color">江大白</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge right-badge text-color">
                下一篇&nbsp;<i class="fas fa-chevron-right"></i>
            </div>
            <div class="card">
                <a href="/2025/05/28/2648998846-2648998846-1/">
                    <div class="card-image">
                        
                        <img src="/medias/frontcover/2648998846_2648998846_1.jpg" class="responsive-img" alt="刚刚，DeepSeek-R1 默默地小版本升级">
                        
                        <span class="card-title">刚刚，DeepSeek-R1 默默地小版本升级</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            
                        
                    </div>
                    <div class="publish-info">
                            <span class="publish-date">
                                <i class="far fa-clock fa-fw icon-date"></i>2025-05-28
                            </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-user fa-fw"></i>
                            ZejunCao
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E7%AE%97%E6%B3%95%E4%B8%8EPython%E5%AE%9E%E6%88%98/">
                        <span class="chip bg-color">机器学习算法与Python实战</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
    </div>
</article>

</div>



<!-- 代码块功能依赖 -->
<script type="text/javascript" src="/libs/codeBlock/codeBlockFuction.js"></script>



<!-- 代码语言 -->

<script type="text/javascript" src="/libs/codeBlock/codeLang.js"></script>


<!-- 代码块复制 -->

<script type="text/javascript" src="/libs/codeBlock/codeCopy.js"></script>


<!-- 代码块收缩 -->

<script type="text/javascript" src="/libs/codeBlock/codeShrink.js"></script>



    </div>
    <div id="toc-aside" class="expanded col l3 hide-on-med-and-down">
        <div class="toc-widget card" style="background-color: white;">
            <div class="toc-title"><i class="far fa-list-alt"></i>&nbsp;&nbsp;目录</div>
            <div id="toc-content"></div>
        </div>
    </div>
</div>

<!-- TOC 悬浮按钮. -->

<div id="floating-toc-btn" class="hide-on-med-and-down">
    <a class="btn-floating btn-large bg-color">
        <i class="fas fa-list-ul"></i>
    </a>
</div>


<script src="/libs/tocbot/tocbot.min.js"></script>
<script>
    $(function () {
        tocbot.init({
            tocSelector: '#toc-content',
            contentSelector: '#articleContent',
            headingsOffset: -($(window).height() * 0.4 - 45),
            collapseDepth: Number('0'),
            headingSelector: 'h2, h3, h4'
        });

        // Set scroll toc fixed.
        let tocHeight = parseInt($(window).height() * 0.4 - 64);
        let $tocWidget = $('.toc-widget');
        $(window).scroll(function () {
            let scroll = $(window).scrollTop();
            /* add post toc fixed. */
            if (scroll > tocHeight) {
                $tocWidget.addClass('toc-fixed');
            } else {
                $tocWidget.removeClass('toc-fixed');
            }
        });

        
        /* 修复文章卡片 div 的宽度. */
        let fixPostCardWidth = function (srcId, targetId) {
            let srcDiv = $('#' + srcId);
            if (srcDiv.length === 0) {
                return;
            }

            let w = srcDiv.width();
            if (w >= 450) {
                w = w + 21;
            } else if (w >= 350 && w < 450) {
                w = w + 18;
            } else if (w >= 300 && w < 350) {
                w = w + 16;
            } else {
                w = w + 14;
            }
            $('#' + targetId).width(w);
        };

        // 切换TOC目录展开收缩的相关操作.
        const expandedClass = 'expanded';
        let $tocAside = $('#toc-aside');
        let $mainContent = $('#main-content');
        $('#floating-toc-btn .btn-floating').click(function () {
            if ($tocAside.hasClass(expandedClass)) {
                $tocAside.removeClass(expandedClass).hide();
                $mainContent.removeClass('l9');
            } else {
                $tocAside.addClass(expandedClass).show();
                $mainContent.addClass('l9');
            }
            fixPostCardWidth('artDetail', 'prenext-posts');
        });
        
    });
</script>

    

</main>




    <footer class="page-footer bg-color">
    
        <link rel="stylesheet" href="/libs/aplayer/APlayer.min.css">
<style>
    .aplayer .aplayer-lrc p {
        
        display: none;
        
        font-size: 12px;
        font-weight: 700;
        line-height: 16px !important;
    }

    .aplayer .aplayer-lrc p.aplayer-lrc-current {
        
        display: none;
        
        font-size: 15px;
        color: #42b983;
    }

    
    .aplayer.aplayer-fixed.aplayer-narrow .aplayer-body {
        left: -66px !important;
    }

    .aplayer.aplayer-fixed.aplayer-narrow .aplayer-body:hover {
        left: 0px !important;
    }

    
</style>
<div class="">
    
    <div class="row">
        <meting-js class="col l8 offset-l2 m10 offset-m1 s12"
                   server="netease"
                   type="playlist"
                   id="503838841"
                   fixed='true'
                   autoplay='false'
                   theme='#42b983'
                   loop='all'
                   order='random'
                   preload='auto'
                   volume='0.7'
                   list-folded='true'
        >
        </meting-js>
    </div>
</div>

<script src="/libs/aplayer/APlayer.min.js"></script>
<script src="/libs/aplayer/Meting.min.js"></script>

    

    <div class="container row center-align"
         style="margin-bottom: 0px !important;">
        <div class="col s12 m8 l8 copy-right">
            Copyright&nbsp;&copy;
            
                <span id="year">2025</span>
            
            <a href="/about" target="_blank">ZejunCao</a>
            |&nbsp;Powered by&nbsp;<a href="https://hexo.io/" target="_blank">Hexo</a>
            |&nbsp;Theme&nbsp;<a href="https://github.com/blinkfox/hexo-theme-matery" target="_blank">Matery</a>
            
            <br>
            
            
            
                
            
            
                <span id="busuanzi_container_site_pv">
                &nbsp;|&nbsp;<i class="far fa-eye"></i>&nbsp;总访问量:&nbsp;
                    <span id="busuanzi_value_site_pv" class="white-color"></span>
            </span>
            
            
                <span id="busuanzi_container_site_uv">
                &nbsp;|&nbsp;<i class="fas fa-users"></i>&nbsp;总访问人数:&nbsp;
                    <span id="busuanzi_value_site_uv" class="white-color"></span>
            </span>
            
            <br>

            <!-- 运行天数提醒. -->
            
            <br>
            
        </div>
        <div class="col s12 m4 l4 social-link social-statis">
    <a href="https://github.com/ZejunCao" class="tooltipped" target="_blank" data-tooltip="访问我的GitHub" data-position="top" data-delay="50">
        <i class="fab fa-github"></i>
    </a>



    <a href="mailto:caozejun369@163.com" class="tooltipped" target="_blank" data-tooltip="邮件联系我" data-position="top" data-delay="50">
        <i class="fas fa-envelope-open"></i>
    </a>







    <a href="tencent://AddContact/?fromId=50&fromSubId=1&subcmd=all&uin=1378463428" class="tooltipped" target="_blank" data-tooltip="QQ联系我: 1378463428" data-position="top" data-delay="50">
        <i class="fab fa-qq"></i>
    </a>



    <a href="https://weibo.com/u/5915009280" class="tooltipped" target="_blank" data-tooltip="关注我的微博: https://weibo.com/u/5915009280" data-position="top" data-delay="50">
        <i class="fab fa-weibo"></i>
    </a>



    <a href="https://www.zhihu.com/people/Garfusion/posts" class="tooltipped" target="_blank" data-tooltip="关注我的知乎: https://www.zhihu.com/people/Garfusion/posts" data-position="top" data-delay="50">
        <i class="fab fa-zhihu1">知</i>
    </a>



</div>
    </div>
</footer>

<div class="progress-bar"></div>


    <!-- 搜索遮罩框 -->
<div id="searchModal" class="modal">
    <div class="modal-content">
        <div class="search-header">
            <span class="title"><i class="fas fa-search"></i>&nbsp;&nbsp;搜索</span>
            <input type="search" id="searchInput" name="s" placeholder="请输入搜索的关键字"
                   class="search-input">
        </div>
        <div id="searchResult"></div>
    </div>
</div>

<script type="text/javascript">
$(function () {
    var searchFunc = function (path, search_id, content_id) {
        'use strict';
        $.ajax({
            url: path,
            dataType: "xml",
            success: function (xmlResponse) {
                // get the contents from search data
                var datas = $("entry", xmlResponse).map(function () {
                    return {
                        title: $("title", this).text(),
                        content: $("content", this).text(),
                        url: $("url", this).text()
                    };
                }).get();
                var $input = document.getElementById(search_id);
                var $resultContent = document.getElementById(content_id);
                $input.addEventListener('input', function () {
                    var str = '<ul class=\"search-result-list\">';
                    var keywords = this.value.trim().toLowerCase().split(/[\s\-]+/);
                    $resultContent.innerHTML = "";
                    if (this.value.trim().length <= 0) {
                        return;
                    }
                    // perform local searching
                    datas.forEach(function (data) {
                        var isMatch = true;
                        var data_title = data.title.trim().toLowerCase();
                        var data_content = data.content.trim().replace(/<[^>]+>/g, "").toLowerCase();
                        var data_url = data.url;
                        data_url = data_url.indexOf('/') === 0 ? data.url : '/' + data_url;
                        var index_title = -1;
                        var index_content = -1;
                        var first_occur = -1;
                        // only match artiles with not empty titles and contents
                        if (data_title !== '' && data_content !== '') {
                            keywords.forEach(function (keyword, i) {
                                index_title = data_title.indexOf(keyword);
                                index_content = data_content.indexOf(keyword);
                                if (index_title < 0 && index_content < 0) {
                                    isMatch = false;
                                } else {
                                    if (index_content < 0) {
                                        index_content = 0;
                                    }
                                    if (i === 0) {
                                        first_occur = index_content;
                                    }
                                }
                            });
                        }
                        // show search results
                        if (isMatch) {
                            str += "<li><a href='" + data_url + "' class='search-result-title'>" + data_title + "</a>";
                            var content = data.content.trim().replace(/<[^>]+>/g, "");
                            if (first_occur >= 0) {
                                // cut out 100 characters
                                var start = first_occur - 20;
                                var end = first_occur + 80;
                                if (start < 0) {
                                    start = 0;
                                }
                                if (start === 0) {
                                    end = 100;
                                }
                                if (end > content.length) {
                                    end = content.length;
                                }
                                var match_content = content.substr(start, end);
                                // highlight all keywords
                                keywords.forEach(function (keyword) {
                                    var regS = new RegExp(keyword, "gi");
                                    match_content = match_content.replace(regS, "<em class=\"search-keyword\">" + keyword + "</em>");
                                });

                                str += "<p class=\"search-result\">" + match_content + "...</p>"
                            }
                            str += "</li>";
                        }
                    });
                    str += "</ul>";
                    $resultContent.innerHTML = str;
                });
            }
        });
    };

    searchFunc('/search.xml', 'searchInput', 'searchResult');
});
</script>

    <!-- 白天和黑夜主题 -->
<div class="stars-con">
    <div id="stars"></div>
    <div id="stars2"></div>
    <div id="stars3"></div>  
</div>

<script>
    function switchNightMode() {
        $('<div class="Cuteen_DarkSky"><div class="Cuteen_DarkPlanet"></div></div>').appendTo($('body')),
        setTimeout(function () {
            $('body').hasClass('DarkMode') 
            ? ($('body').removeClass('DarkMode'), localStorage.setItem('isDark', '0'), $('#sum-moon-icon').removeClass("fa-sun").addClass('fa-moon')) 
            : ($('body').addClass('DarkMode'), localStorage.setItem('isDark', '1'), $('#sum-moon-icon').addClass("fa-sun").removeClass('fa-moon')),
            
            setTimeout(function () {
            $('.Cuteen_DarkSky').fadeOut(1e3, function () {
                $(this).remove()
            })
            }, 2e3)
        })
    }
</script>

    <!-- 回到顶部按钮 -->
<div id="backTop" class="top-scroll">
    <a class="btn-floating btn-large waves-effect waves-light" href="#!">
        <i class="fas fa-arrow-up"></i>
    </a>
</div>


    <script src="/libs/materialize/materialize.min.js"></script>
    <script src="/libs/masonry/masonry.pkgd.min.js"></script>
    <script src="/libs/aos/aos.js"></script>
    <script src="/libs/scrollprogress/scrollProgress.min.js"></script>
    <script src="/libs/lightGallery/js/lightgallery-all.min.js"></script>
    <script src="/js/matery.js"></script>

    

    
    
    

    <!-- 雪花特效 -->
    

    <!-- 鼠标星星特效 -->
    

     
        <script src="https://ssl.captcha.qq.com/TCaptcha.js"></script>
        <script src="/libs/others/TencentCaptcha.js"></script>
        <button id="TencentCaptcha" data-appid="xxxxxxxxxx" data-cbfn="callback" type="button" hidden></button>
    

    <!-- Baidu Analytics -->

    <!-- Baidu Push -->

<script>
    (function () {
        var bp = document.createElement('script');
        var curProtocol = window.location.protocol.split(':')[0];
        if (curProtocol === 'https') {
            bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
        } else {
            bp.src = 'http://push.zhanzhang.baidu.com/push.js';
        }
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(bp, s);
    })();
</script>

    
    <script src="/libs/others/clicklove.js" async="async"></script>
    
    
    <script async src="/libs/others/busuanzi.pure.mini.js"></script>
    

    

    

    <!--腾讯兔小巢-->
    
    

    

    

    
    <script src="/libs/instantpage/instantpage.js" type="module"></script>
    

</body>

</html>
